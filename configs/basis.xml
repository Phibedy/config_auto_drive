<framework>
	<execution>
		<maxThreadCount> 1 </maxThreadCount>
		<clock enabled="true" unit="hz">100</clock>
	    <configMonitor>true</configMonitor>
	    <profiling enabled="true" />
	</execution>
	<modulesToEnable>
		<module logLevel="WARN">ogre_window_manager</module>
		<module>image_hint_worker</module>
		<module logLevel="WARN">image_renderer_grey</module>
		<module logLevel="WARN">image_renderer_debug</module>
		<module>image_hint_transformer</module>
		<module>image_object_renderer</module>
		<module>image_renderer_image_object</module>
		<module logLevel="WARN">image_converter_trans</module>
	    <module>image_renderer_trans</module>
		<module logLevel="WARN">image_hint_merger</module>
		<module>environment_line_predictor</module>
		<module logLevel="WARN">ogre_input</module>
		<module>trajectory_line_creator</module>
		<module>trajectory_point_creator</module>
		<module>image_hint_generator</module>
		<module>environment_filter</module>
	</modulesToEnable>
	<module>
	    <name>image_hint_generator</name>
		<writePriority>10</writePriority>
		<channelMapping from="HINTS" to="HINTS"/>
		<channelMapping from="TARGET_IMAGE" to="GREY_IMAGE"/>
	</module>
	<module>
	    <name>trajectory_point_creator</name>
		<channelMapping from="LINE" to="LINE"/>
		<channelMapping from="POINT" to="TRAJECTORY_POINT"/>
		<config>
			<distanceSearched> 0.5 </distanceSearched>
		</config>
	</module>
	<module>
	    <name>trajectory_line_creator</name>
		<channelMapping from="ENVIRONMENT" to="ENVIRONMENT_MERGED"/>
		<channelMapping from="LINE" to="LINE"/>
		<config src="environment.lconf" />
	</module>
	<module>
	    <name>environment_filter</name>
		<channelMapping from="ENVIRONMENT_INPUT" to="ENVIRONMENT_ROAD"/>
		<channelMapping from="ENVIRONMENT_OUTPUT" to="ENVIRONMENT_ROAD_FILTERED"/>
	</module>
	<module>
	    <name>image_hint_merger</name>
		<channelMapping from="ENVIRONMENT_INPUT" to="ENVIRONMENT_ROAD_FILTERED"/>
		<channelMapping from="ENVIRONMENT_OUTPUT" to="ENVIRONMENT_MERGED_BEFORE_PREDICT"/>
	</module>
	<module>
		<name>environment_line_predictor</name>
		<channelMapping from="ENVIRONMENT_INPUT" to="ENVIRONMENT_MERGED_BEFORE_PREDICT" />
		<channelMapping from="ENVIRONMENT_OUTPUT" to="ENVIRONMENT_MERGED" />
	</module>
	<module>
		<name>image_hint_transformer</name>
		<channelMapping from="ENVIRONMENT" to="ENVIRONMENT_ROAD"/>
	</module>
	<module>
		<name>image_object_renderer</name>
		<channelMapping from="IMAGE" to="IMAGE_OBJECT_IMAGE"/>
		<config>
		    <environments>ENVIRONMENT_ROAD,ENVIRONMENT_MERGED</environments>
		    <polylines>LINE</polylines>
		    <vertex2f></vertex2f>
		    <vertex4f>TRAJECTORY_POINT</vertex4f>
		    <!--The default Color, TODO add colors for points, lines etc -->
		    <colorR>255</colorR>
		    <colorG>255</colorG>
		    <colorB>0</colorB>
		</config>
		<config name="ENVIRONMENT_ROAD">
		    <colorR>255</colorR>
		    <colorG>123</colorG>
		    <colorB>0</colorB>
		</config>
		<config name="ENVIRONMENT_ROAD_MERGED">
		    <colorR>255</colorR>
		    <colorG>255</colorG>
		    <colorB>0</colorB>
		</config>
		<config name="LINE">
		    <colorR>255</colorR>
		    <colorG>255</colorG>
		    <colorB>0</colorB>
		</config>
		<config name="TRAJECTORY_POINT">
		    <colorR>255</colorR>
		    <colorG>0</colorG>
		    <colorB>0</colorB>
		</config>
	</module>
	<module>
		<name>ogre_window_manager</name>
	</module>
	<module>
		<name>image_renderer_grey</name>
		<realName>image_renderer</realName>
		<channelMapping from="IMAGE" to="GREY_IMAGE"/>
	</module>
	<module>
		<name>image_renderer_debug</name>
		<writePriority>2</writePriority>
		<realName>image_renderer</realName>
		<channelMapping from="IMAGE" to="DEBUG_IMAGE"/>
	</module>
	<module>
	    <name>image_renderer_trans</name>
		<writePriority>1</writePriority>
		<realName>image_renderer</realName>
		<channelMapping from="IMAGE" to="TRANS_IMAGE"/>
		<config>
		    <WINDOW>TRANSLATED</WINDOW>
		</config>
	</module>
	<module>
		<name>image_renderer_image_object</name>
		<writePriority>2</writePriority>
		<realName>image_renderer</realName>
		<channelMapping from="IMAGE" to="IMAGE_OBJECT_IMAGE"/>
		<config>
		    <WINDOW>TRANSLATED</WINDOW>
		</config>
	</module>
	<module>
	    <name>image_hint_worker</name>
	</module>
	<module>
		<name>image_converter_trans</name>
		<realName>image_converter</realName>	
	    <channelMapping from="INPUT_IMAGE" to="GREY_IMAGE"/>
	    <channelMapping from="OUTPUT_IMAGE" to="TRANS_IMAGE"/>
	    <config>
		    <output_format>GREY</output_format>
		    <filter>imageV2C</filter>
	    </config>
	</module>
	<module>
		<name>ogre_input</name>
		<config>
			<WINDOW>TRANSLATED</WINDOW>
			<key>
				<down>
					<Left>
						<command>image_loader</command>
						<content>previous</content>
						<repeat>true</repeat>
					</Left>
					<Right>
						<command>image_loader</command>
						<content>next</content>
						<repeat>true</repeat>
					</Right>
					<space>
						<command>image_loader</command>
						<content>manual</content>
					</space>
				</down>
			</key>
		</config>
	</module>
</framework>
