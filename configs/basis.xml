<framework>
    <modulesToEnable>
        <module logLevel="WARN">image_hint_generator</module>
        <module logLevel="ERROR">image_hint_transformer</module>
        <module logLevel="WARN">image_hint_transformer_obstacle</module>
        <module logLevel="ERROR">image_hint_worker_lane</module>
        <module logLevel="ERROR">image_hint_worker_obstacle</module>
        <module logLevel="WARN">environment_predictor</module>
        <module logLevel="WARN">trajectory_creator</module>
        <module logLevel="ERROR">environment_filter</module>
        <module logLevel="WARN">trajectory_point_controller</module>
        <module logLevel="WARN">image_proxy</module>
        <module logLevel="WARN">street_obstacle_merger</module>
        <module logLevel="WARN">parking</module>
        <module logLevel="WARN">car_tracker</module>
        <!--module logLevel="DEBUG">car_to_matlab</module-->
        <if set="sendData">
            <module logLevel="WARN">socket_data_sender</module>
            <module logLevel="WARN">image_converter_scaledown</module>
        </if>
    </modulesToEnable>
    <service>
        <name>PHOENIX_SERVICE</name>
        <realName>phoenix_CC2016_service</realName>
            <config>
                <stateFromConfig>true</stateFromConfig>
                <updateInMilliS>-1</updateInMilliS>
            </config>
    </service>
    <module>
            <name>parking</name>
            <config>
                <k>0.05</k> <!-- safety distance zur Ecke der zweiten Box-->
                <d>0.03</d> <!-- safety distance zur ersten Box -->
                <wheelbase>0.21</wheelbase> <!-- Radstand-->
                <carLength>0.32</carLength>
                <carWidth>0.2</carWidth>
                <carLength>0.32</carLength>
                <maxSteeringAngle>25</maxSteeringAngle> <!-- in Grad-->
                <distanceMid2Lidar>0.04</distanceMid2Lidar>
            </config>
    </module>
    <module>
        <name>street_obstacle_merger</name>
        <channelMapping priority="10" from="CAR" to="CAR"/>
        <channelMapping from="ENVIRONMENT_INPUT" to="ENVIRONMENT_OBSTACLE_RAW"/>
        <channelMapping from="ENVIRONMENT_OUTPUT" to="ENVIRONMENT_OBSTACLE"/>
        <config src="street_utils/obstacle.lconf"/>
        <config src="visible_areas.lconf"/>
    </module>
    <module>
        <name>car_to_matlab</name>
    </module>
    <module>
        <name>image_converter_scaledown</name>
        <realName>image_converter</realName>
        <channelMapping from="INPUT_IMAGE" to="GREY_IMAGE"/>
        <channelMapping from="OUTPUT_IMAGE" to="IMAGE_GREY_SCALE"/>
        <config>
            <scaleDown>5</scaleDown>
        </config>
    </module>
    <module>
        <name>socket_data_sender</name>
        <config>
            <ip>localhost</ip>
            <port>65001</port>
        </config>
    </module>
    <module>
        <name>car_tracker</name>
    </module>
    <module>
        <name>environment_logger</name>
        <channelMapping from="ENVIRONMENT_INPUT" to="ENVIRONMENT_ROAD"/>
        <config>
            <directory>/home/phibedy/Dokumente/programmieren/lms_repos/config_auto_drive/logging_data</directory>
        </config>
    </module>
    <module>
        <name>trajectory_point_controller</name>
        <channelMapping from="TRAJECTORY" to="TRAJECTORY_LINE"/>
        <config>
            <useMPCcontroller>0</useMPCcontroller>
            <weight_y>3</weight_y>
            <weight_phi>3</weight_phi>
            <weight_steering_front>0.03</weight_steering_front>
            <weight_steering_rear>3</weight_steering_rear>
            <!-- old stuff: -->
            <aggro>0.95</aggro>
            <regler>2</regler>
            <!--velocity-controller -->
            <maxSpeed>3.0</maxSpeed>
            <minCurveSpeed>1.5</minCurveSpeed>
            <forcastLength>0.5</forcastLength>
            <maxDeltaTInMs>100</maxDeltaTInMs>
            <maxCurvation>1.2</maxCurvation>
        </config>
    </module>
    <module>
        <name>image_hint_generator</name>
        <channelMapping priority="10" from="HINTS" to="HINTS"/>
        <channelMapping priority="10" from="HINTS_OBSTACLE" to="HINTS_OBSTACLE"/>
        <channelMapping from="TARGET_IMAGE" to="GREY_IMAGE"/>
        <channelMapping priority="10" from="MIDDLE_LANE" to="MIDDLE_LANE"/>
        <config>
            <searchForObstacles>true</searchForObstacles>
            <searchForCrossing>true</searchForCrossing>
            <numerOfSegmentsLines>1</numerOfSegmentsLines>
            <lineOffset>0.1</lineOffset>
        </config>
        <config name="defaultEPParameter" src="imaging/defaultEdgePointParam.lconf"/>
        <config name="defaultLPParameter" src="imaging/defaultLinePointParam.lconf"/>
        <config name="defaultLineParameter" src="imaging/defaultLineParam.lconf"/>
        <config name="defaultObstacleParameter" src="imaging/defaultObstacleParam.lconf"/>
    </module>
    <module>
        <name>sensor_tracker</name><!--Brauchen wir den noch?-->
    </module>
    <module>
        <name>trajectory_creator</name>
        <channelMapping from="LINE" to="TRAJECTORY_LINE"/>
        <channelMapping from="ROAD" to="MIDDLE_LANE"/>
        <channelMapping from="ENVIRONMENT_OBSTACLE" to="ENVIRONMENT_OBSTACLE"/>
        <channelMapping priority="9" from="CAR" to="CAR"/>
        <config src="street_utils/obstacle.lconf"/>
        <config src="trajectory_creator.lconf"/>
    </module>
    <module>
        <name>environment_filter</name>
        <channelMapping from="ENVIRONMENT_INPUT" to="ENVIRONMENT_ROAD_RAW"/>
        <channelMapping from="ENVIRONMENT_OUTPUT" to="ENVIRONMENT_ROAD_FILTERED"/>
    </module>
    <module>
        <name>environment_predictor</name>
        <channelMapping priority="10" from="CAR" to="CAR"/>
        <channelMapping from="ENVIRONMENT_INPUT" to="ENVIRONMENT_ROAD_FILTERED"/>
        <channelMapping from="ROAD_OUTPUT" to="MIDDLE_LANE"/>
        <config>
            <elementCount>10</elementCount>
            <r_fakt>150</r_fakt>
            <kov>15</kov>
            <prioFact>5000</prioFact>
            <kovAbnahme>0.15</kovAbnahme>
            <elementLength>0.2</elementLength>
            <enableMove>false</enableMove>
            <logState>false</logState>
        </config>
        <config user="odroid">
            <logPrefix>/home/odroid/data/env/env</logPrefix>
        </config>
    </module>
    <module>
        <name>image_hint_transformer</name>
        <channelMapping from="ENVIRONMENT" to="ENVIRONMENT_ROAD_RAW"/>
    </module>
    <module>
        <name>image_hint_transformer_obstacle</name>
        <realName>image_hint_transformer</realName>
        <channelMapping from="ENVIRONMENT" to="ENVIRONMENT_OBSTACLE_RAW"/>
        <channelMapping from="HINTS" to="HINTS_OBSTACLE"/>

    </module>
    <module>
        <name>image_hint_worker_lane</name>
        <realName>image_hint_worker</realName>
        <channelMapping priority="2" from="HINTS" to="HINTS"/>
    </module>
    <module>
        <name>image_hint_worker_obstacle</name>
        <realName>image_hint_worker</realName>
        <channelMapping priority="2"  from="HINTS" to="HINTS_OBSTACLE"/>
        <channelMapping from="DEBUG_IMAGE" to="DEBUG_IMAGE_OBSTACLE"/>
    </module>
    <module>
        <name>image_proxy</name>
        <channelMapping from="INPUT_IMAGE" to="GREY_IMAGE_PRE" />
        <channelMapping from="OUTPUT_IMAGE" to="GREY_IMAGE"/>
        <config><!--IMAGE_CHANNEL-->
            <displayMode>IMAGE_CHANNEL</displayMode>
        </config>
        <config user="phibedy">
            <directory>/home/phibedy/Dokumente/programmieren/c++/lms_repos/config_auto_drive/test_images/20150625-151241</directory>
            <singleFile>/home/phibedy/Dokumente/programmieren/c++/lms_repos/config_auto_drive/test_images/20150519-164907/0000.pgm</singleFile>
        </config>
        <config user="hans">
            <directory>/home/hans/phoenix/config_auto_drive/test_images/20150519-164907</directory>
            <singleFile>/home/hans/phoenix/config_auto_drive/test_images/20150519-164907/0050.pgm</singleFile>
        </config>
        <config user="tobi">
            <directory>/home/tobi/phoenix_code/repos/config_auto_drive/test_images/20150519-164907</directory>
            <singleFile>/home/tobi/phoenix_code/repos/config_auto_drive/test_images/20150512-181426/0050.pgm</singleFile>
        </config>
        <config user="jochen">
            <directory>/data/projects/tum.phoenix/code/config_auto_drive/test_images/20150519-164907</directory>
            <singleFile>/data/projects/tum.phoenix/code/config_auto_drive/test_images/20150512-181426/0050.pgm</singleFile>
        </config>
    </module>
</framework>
