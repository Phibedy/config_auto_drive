<framework>
    <modulesToEnable logLevel="INFO">
        <module>mavlink_usb_importer</module>
        <module>data_to_mavlink</module>
        <module>mavlink_to_data</module>
        <if set="mavlink_logger">
            <module>mavlink_logger</module>
            <module>mavlink_csv_logger</module>
        </if>
    </modulesToEnable>

    <module>
        <name>mavlink_usb_importer</name>
        <config>
            <path>/dev/ttyACM0</path>
        </config>
        <config user="odroid">
            <path>/dev/senseboard2016</path>
        </config>
    </module>
    <module>
        <name>mavlink_to_data</name>
        <channelMapping priority="10" from="CAR" to="CAR"/>
        <config>
            <!--
            <sensor_timebase>fixed</sensor_timebase>
            <sensor_timebase_tickrate>100</sensor_timebase_tickrate>
            -->

            <!-- IMU -->
            <imu_0>IMU</imu_0>
            <!-- VARIANCES (@1khz) -->
            <imu_0_acc_cov_xx>0.5</imu_0_acc_cov_xx>
            <imu_0_acc_cov_yy>1.5</imu_0_acc_cov_yy>
            <imu_0_gyro_cov_zz>0.025</imu_0_gyro_cov_zz>

            <!-- BIASES -->
            <imu_0_acc_bias_x>-0.0127</imu_0_acc_bias_x>
            <imu_0_acc_bias_y>0.0563</imu_0_acc_bias_y>
            <imu_0_acc_bias_z>0</imu_0_acc_bias_z>
            <imu_0_gyro_bias_x>0.0028</imu_0_gyro_bias_x>
            <imu_0_gyro_bias_y>-0.0808</imu_0_gyro_bias_y>
            <imu_0_gyro_bias_z>0.0336</imu_0_gyro_bias_z>

            <!-- HALL SENSOR -->
            <odometer_0>HALL</odometer_0>
            <odometer_0_velo_cov_xx>0.1</odometer_0_velo_cov_xx>

            <!-- MOUSE FRONT -->
            <odometer_1>MOTION_FRONT</odometer_1>
            <!-- MOUSE REAR -->
            <odometer_2>MOTION_REAR</odometer_2>

            <!-- LIDAR -->
            <distance_0>LIDAR</distance_0>
            <!-- TOF FRONT -->
            <distance_1>TOF_FRONT</distance_1>
            <!-- TOF_REAR -->
            <distance_2>TOF_REAR</distance_2>
        </config>
    </module>
    <module>
        <name>data_to_mavlink</name>
    </module>
    <module>
        <name>mavlink_logger</name>
        <realName>channel_logger</realName>
        <config>
            <dataChannels>MAVLINK_IN</dataChannels>
        </config>
        <config user="odroid">
            <directory>/home/odroid/data/mavlink</directory>
        </config>
    </module>
    <module>
        <name>mavlink_csv_logger</name>
        <config user="odroid">
            <directory>/home/odroid/data/mavlink_csv</directory>
            <channel>MAVLINK_IN</channel>
            <create_subfolder_with_current_date>true</create_subfolder_with_current_date>
        </config>
    </module>
    <include src="mycam.xml"/>
</framework>
