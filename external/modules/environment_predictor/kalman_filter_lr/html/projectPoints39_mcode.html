<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="30,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T8U3">xp</span>, <span class="var type1" id="S3T8U4">yp</span>] = projectPoints(<span class="var type1" id="S4T2U7">r</span>, <span class="var type1" id="S5T3U8">delta</span>, <span class="var type1" id="S6T3U9">dist</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="30,2" id="srcline2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,3" id="srcline3"> 3</a></span><span class="line">[<span class="mxinfo " id="T8:U6"><span class="var type1" id="S7T8U13">x</span></span>, <span class="mxinfo " id="T8:U8"><span class="var type1" id="S8T8U14">y</span></span>] = <span class="fcn" id="F17N3:B16">getPointsFromState</span>(<span class="var type1" id="S4T2U17">r</span>, <span class="var type1" id="S5T3U18">delta</span>); </span></span>
<span class="srcline"><span class="lineno"><a href="30,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,5" id="srcline5"> 5</a></span><span class="line"><span class="mxinfo " id="T8:U12"><span class="var type1" id="S2T8U21">xp</span> = <span class="mxinfo " id="T8:U14">zeros(<span class="mxinfo " id="T3:U15">numel(<span class="var type1" id="S4T2U26">r</span>)</span>, 1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo " id="T8:U17"><span class="var type1" id="S3T8U30">yp</span> = <span class="mxinfo " id="T8:U19">zeros(<span class="mxinfo " id="T3:U20">numel(<span class="var type1" id="S4T2U35">r</span>)</span>, 1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,7" id="srcline7"> 7</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="30,8" id="srcline8"> 8</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S12T3U39">z</span>=<span class="mxinfo " id="T3:U23">1</span>:numel(<span class="var type1" id="S7T8U44">x</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="30,9" id="srcline9"> 9</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T5:U25"><span class="var type1" id="S12T3U48">z</span>==<span class="mxinfo " id="T3:U27">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="30,10" id="srcline10">10</a></span><span class="line">        <span class="mxinfo " id="T3:U28"><span class="var type1" id="S13T3U52">vx</span> = <span class="mxinfo " id="T3:U30">-(<span class="mxinfo " id="T3:U31"><span class="mxinfo " id="T3:U32"><span class="var type1" id="S8T8U57">y</span>(<span class="mxinfo " id="T3:U34">2</span>)</span>-<span class="mxinfo " id="T3:U35"><span class="var type1" id="S8T8U60">y</span>(<span class="mxinfo " id="T3:U37">1</span>)</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,11" id="srcline11">11</a></span><span class="line">        <span class="mxinfo " id="T3:U38"><span class="var type1" id="S14T3U64">vy</span> =   <span class="mxinfo " id="T3:U40"><span class="mxinfo " id="T3:U41"><span class="var type1" id="S7T8U67">x</span>(<span class="mxinfo " id="T3:U43">2</span>)</span>-<span class="mxinfo " id="T3:U44"><span class="var type1" id="S7T8U70">x</span>(<span class="mxinfo " id="T3:U46">1</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,12" id="srcline12">12</a></span><span class="line">        <span class="mxinfo " id="T3:U47"><span class="var type1" id="S15T3U74">betr</span> = <span class="mxinfo " id="T3:U49">sqrt(<span class="mxinfo " id="T3:U50"><span class="mxinfo " id="T3:U51"><span class="var type1" id="S13T3U79">vx</span>^2</span> + <span class="mxinfo " id="T3:U53"><span class="var type1" id="S14T3U82">vy</span>^2</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,13" id="srcline13">13</a></span><span class="line">        <span class="mxinfo " id="T3:U55"><span class="mxinfo " id="T3:U56"><span class="var type1" id="S2T8U87">xp</span>(<span class="mxinfo " id="T3:U58">1</span>)</span> = <span class="mxinfo " id="T3:U59"><span class="mxinfo " id="T3:U60"><span class="var type1" id="S7T8U91">x</span>(<span class="mxinfo " id="T3:U62">1</span>)</span> + <span class="mxinfo " id="T3:U63"><span class="mxinfo " id="T3:U64"><span class="mxinfo " id="T3:U65"><span class="mxinfo " id="T3:U66">1</span>/<span class="var type1" id="S15T3U97">betr</span></span> * <span class="var type1" id="S6T3U98">dist</span></span> * <span class="var type1" id="S13T3U99">vx</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,14" id="srcline14">14</a></span><span class="line">        <span class="mxinfo " id="T3:U70"><span class="mxinfo " id="T3:U71"><span class="var type1" id="S3T8U103">yp</span>(<span class="mxinfo " id="T3:U73">1</span>)</span> = <span class="mxinfo " id="T3:U74"><span class="mxinfo " id="T3:U75"><span class="var type1" id="S8T8U107">y</span>(<span class="mxinfo " id="T3:U77">1</span>)</span> + <span class="mxinfo " id="T3:U78"><span class="mxinfo " id="T3:U79"><span class="mxinfo " id="T3:U80"><span class="mxinfo " id="T3:U81">1</span>/<span class="var type1" id="S15T3U113">betr</span></span> * <span class="var type1" id="S6T3U114">dist</span></span> * <span class="var type1" id="S14T3U115">vy</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,15" id="srcline15">15</a></span><span class="line">    <span class="keyword">elseif</span> <span class="mxinfo " id="T5:U85"><span class="var type1" id="S12T3U118">z</span>==<span class="mxinfo " id="T3:U87">numel(<span class="var type1" id="S7T8U121">x</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="30,16" id="srcline16">16</a></span><span class="line">        <span class="mxinfo " id="T3:U89"><span class="var type1" id="S13T3U124">vx</span> = <span class="mxinfo " id="T3:U91">-(<span class="mxinfo " id="T3:U92"><span class="mxinfo " id="T3:U93"><span class="var type1" id="S8T8U129">y</span>(<span class="var type1" id="S12T3U130">z</span>)</span>-<span class="mxinfo " id="T3:U96"><span class="var type1" id="S8T8U132">y</span>(<span class="mxinfo " id="T3:U98"><span class="var type1" id="S12T3U134">z</span>-<span class="mxinfo " id="T3:U100">1</span></span>)</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,17" id="srcline17">17</a></span><span class="line">        <span class="mxinfo " id="T3:U101"><span class="var type1" id="S14T3U138">vy</span> = <span class="mxinfo " id="T3:U103"><span class="mxinfo " id="T3:U104"><span class="var type1" id="S7T8U141">x</span>(<span class="var type1" id="S12T3U142">z</span>)</span>-<span class="mxinfo " id="T3:U107"><span class="var type1" id="S7T8U144">x</span>(<span class="mxinfo " id="T3:U109"><span class="var type1" id="S12T3U146">z</span>-<span class="mxinfo " id="T3:U111">1</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,18" id="srcline18">18</a></span><span class="line">        <span class="mxinfo " id="T3:U112"><span class="var type1" id="S15T3U150">betr</span> = <span class="mxinfo " id="T3:U114">sqrt(<span class="mxinfo " id="T3:U115"><span class="mxinfo " id="T3:U116"><span class="var type1" id="S13T3U155">vx</span>^2</span> + <span class="mxinfo " id="T3:U118"><span class="var type1" id="S14T3U158">vy</span>^2</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,19" id="srcline19">19</a></span><span class="line">        <span class="mxinfo " id="T3:U120"><span class="mxinfo " id="T3:U121"><span class="var type1" id="S2T8U163">xp</span>(<span class="var type1" id="S12T3U164">z</span>)</span> = <span class="mxinfo " id="T3:U124"><span class="mxinfo " id="T3:U125"><span class="var type1" id="S7T8U167">x</span>(<span class="var type1" id="S12T3U168">z</span>)</span> + <span class="mxinfo " id="T3:U128"><span class="mxinfo " id="T3:U129"><span class="mxinfo " id="T3:U130"><span class="mxinfo " id="T3:U131">1</span>/<span class="var type1" id="S15T3U173">betr</span></span> * <span class="var type1" id="S6T3U174">dist</span></span> * <span class="var type1" id="S13T3U175">vx</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,20" id="srcline20">20</a></span><span class="line">        <span class="mxinfo " id="T3:U135"><span class="mxinfo " id="T3:U136"><span class="var type1" id="S3T8U179">yp</span>(<span class="var type1" id="S12T3U180">z</span>)</span> = <span class="mxinfo " id="T3:U139"><span class="mxinfo " id="T3:U140"><span class="var type1" id="S8T8U183">y</span>(<span class="var type1" id="S12T3U184">z</span>)</span> + <span class="mxinfo " id="T3:U143"><span class="mxinfo " id="T3:U144"><span class="mxinfo " id="T3:U145"><span class="mxinfo " id="T3:U146">1</span>/<span class="var type1" id="S15T3U189">betr</span></span> * <span class="var type1" id="S6T3U190">dist</span></span> * <span class="var type1" id="S14T3U191">vy</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,21" id="srcline21">21</a></span><span class="line">    <span class="keyword">else</span> </span></span>
<span class="srcline"><span class="lineno"><a href="30,22" id="srcline22">22</a></span><span class="line">        <span class="mxinfo " id="T3:U150"><span class="var type1" id="S13T3U195">vx</span> = <span class="mxinfo " id="T3:U152"><span class="mxinfo " id="T3:U153"><span class="mxinfo " id="T3:U154"><span class="var type1" id="S7T8U199">x</span>(<span class="var type1" id="S12T3U200">z</span>)</span> - <span class="mxinfo " id="T3:U157"><span class="var type1" id="S7T8U202">x</span>(<span class="mxinfo " id="T3:U159"><span class="var type1" id="S12T3U204">z</span>-<span class="mxinfo " id="T3:U161">1</span></span>)</span></span> - <span class="mxinfo " id="T3:U162"><span class="mxinfo " id="T3:U163">0.5</span>*(<span class="mxinfo " id="T3:U164"><span class="mxinfo " id="T3:U165"><span class="var type1" id="S7T8U211">x</span>(<span class="mxinfo " id="T3:U167"><span class="var type1" id="S12T3U213">z</span>+<span class="mxinfo " id="T3:U169">1</span></span>)</span>-<span class="mxinfo " id="T3:U170"><span class="var type1" id="S7T8U216">x</span>(<span class="mxinfo " id="T3:U172"><span class="var type1" id="S12T3U218">z</span>-<span class="mxinfo " id="T3:U174">1</span></span>)</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,23" id="srcline23">23</a></span><span class="line">        <span class="mxinfo " id="T3:U175"><span class="var type1" id="S14T3U222">vy</span> = <span class="mxinfo " id="T3:U177"><span class="mxinfo " id="T3:U178"><span class="mxinfo " id="T3:U179"><span class="var type1" id="S8T8U226">y</span>(<span class="var type1" id="S12T3U227">z</span>)</span> - <span class="mxinfo " id="T3:U182"><span class="var type1" id="S8T8U229">y</span>(<span class="mxinfo " id="T3:U184"><span class="var type1" id="S12T3U231">z</span>-<span class="mxinfo " id="T3:U186">1</span></span>)</span></span> - <span class="mxinfo " id="T3:U187"><span class="mxinfo " id="T3:U188">0.5</span>*(<span class="mxinfo " id="T3:U189"><span class="mxinfo " id="T3:U190"><span class="var type1" id="S8T8U238">y</span>(<span class="mxinfo " id="T3:U192"><span class="var type1" id="S12T3U240">z</span>+<span class="mxinfo " id="T3:U194">1</span></span>)</span>-<span class="mxinfo " id="T3:U195"><span class="var type1" id="S8T8U243">y</span>(<span class="mxinfo " id="T3:U197"><span class="var type1" id="S12T3U245">z</span>-<span class="mxinfo " id="T3:U199">1</span></span>)</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,24" id="srcline24">24</a></span><span class="line">        <span class="mxinfo " id="T3:U200"><span class="var type1" id="S15T3U249">betr</span> = <span class="mxinfo " id="T3:U202">sqrt(<span class="mxinfo " id="T3:U203"><span class="mxinfo " id="T3:U204"><span class="var type1" id="S13T3U254">vx</span>^2</span> + <span class="mxinfo " id="T3:U206"><span class="var type1" id="S14T3U257">vy</span>^2</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,25" id="srcline25">25</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T5:U208"><span class="var type1" id="S15T3U262">betr</span> &lt; <span class="mxinfo " id="T3:U210">0.0001</span></span> </span></span>
<span class="srcline"><span class="lineno"><a href="30,26" id="srcline26">26</a></span><span class="line">            <span class="mxinfo " id="T3:U211"><span class="var type1" id="S13T3U266">vx</span> = <span class="mxinfo " id="T3:U213">-(<span class="mxinfo " id="T3:U214"><span class="mxinfo " id="T3:U215"><span class="var type1" id="S8T8U271">y</span>(<span class="var type1" id="S12T3U272">z</span>)</span>-<span class="mxinfo " id="T3:U218"><span class="var type1" id="S8T8U274">y</span>(<span class="mxinfo " id="T3:U220"><span class="var type1" id="S12T3U276">z</span>-<span class="mxinfo " id="T3:U222">1</span></span>)</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,27" id="srcline27">27</a></span><span class="line">            <span class="mxinfo " id="T3:U223"><span class="var type1" id="S14T3U280">vy</span> = <span class="mxinfo " id="T3:U225"><span class="mxinfo " id="T3:U226"><span class="var type1" id="S7T8U283">x</span>(<span class="var type1" id="S12T3U284">z</span>)</span>-<span class="mxinfo " id="T3:U229"><span class="var type1" id="S7T8U286">x</span>(<span class="mxinfo " id="T3:U231"><span class="var type1" id="S12T3U288">z</span>-<span class="mxinfo " id="T3:U233">1</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,28" id="srcline28">28</a></span><span class="line">            <span class="mxinfo " id="T3:U234"><span class="var type1" id="S15T3U292">betr</span> = <span class="mxinfo " id="T3:U236">sqrt(<span class="mxinfo " id="T3:U237"><span class="mxinfo " id="T3:U238"><span class="var type1" id="S13T3U297">vx</span>^2</span> + <span class="mxinfo " id="T3:U240"><span class="var type1" id="S14T3U300">vy</span>^2</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,29" id="srcline29">29</a></span><span class="line">            <span class="mxinfo " id="T3:U242"><span class="mxinfo " id="T3:U243"><span class="var type1" id="S2T8U305">xp</span>(<span class="var type1" id="S12T3U306">z</span>)</span> = <span class="mxinfo " id="T3:U246"><span class="mxinfo " id="T3:U247"><span class="var type1" id="S7T8U309">x</span>(<span class="var type1" id="S12T3U310">z</span>)</span> + <span class="mxinfo " id="T3:U250"><span class="mxinfo " id="T3:U251"><span class="mxinfo " id="T3:U252"><span class="mxinfo " id="T3:U253">1</span>/<span class="var type1" id="S15T3U315">betr</span></span> * <span class="var type1" id="S6T3U316">dist</span></span> * <span class="var type1" id="S13T3U317">vx</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,30" id="srcline30">30</a></span><span class="line">            <span class="mxinfo " id="T3:U257"><span class="mxinfo " id="T3:U258"><span class="var type1" id="S3T8U321">yp</span>(<span class="var type1" id="S12T3U322">z</span>)</span> = <span class="mxinfo " id="T3:U261"><span class="mxinfo " id="T3:U262"><span class="var type1" id="S8T8U325">y</span>(<span class="var type1" id="S12T3U326">z</span>)</span> + <span class="mxinfo " id="T3:U265"><span class="mxinfo " id="T3:U266"><span class="mxinfo " id="T3:U267"><span class="mxinfo " id="T3:U268">1</span>/<span class="var type1" id="S15T3U331">betr</span></span> * <span class="var type1" id="S6T3U332">dist</span></span> * <span class="var type1" id="S14T3U333">vy</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,31" id="srcline31">31</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,32" id="srcline32">32</a></span><span class="line">            <span class="mxinfo " id="T3:U272"><span class="mxinfo " id="T3:U273"><span class="var type1" id="S2T8U338">xp</span>(<span class="var type1" id="S12T3U339">z</span>)</span> = <span class="mxinfo " id="T3:U276"><span class="mxinfo " id="T3:U277"><span class="var type1" id="S7T8U342">x</span>(<span class="var type1" id="S12T3U343">z</span>)</span> - <span class="mxinfo " id="T3:U280"><span class="mxinfo " id="T3:U281"><span class="mxinfo " id="T3:U282"><span class="mxinfo " id="T3:U283"><span class="mxinfo " id="T3:U284">sign(<span class="mxinfo " id="T3:U285"><span class="var type1" id="S4T2U351">r</span>(<span class="mxinfo " id="T3:U287"><span class="var type1" id="S12T3U353">z</span>+<span class="mxinfo " id="T3:U289">1</span></span>)</span>)</span>* <span class="mxinfo " id="T3:U290">1</span></span>/<span class="var type1" id="S15T3U356">betr</span></span> * <span class="var type1" id="S6T3U357">dist</span></span> * <span class="var type1" id="S13T3U358">vx</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,33" id="srcline33">33</a></span><span class="line">            <span class="mxinfo " id="T3:U294"><span class="mxinfo " id="T3:U295"><span class="var type1" id="S3T8U362">yp</span>(<span class="var type1" id="S12T3U363">z</span>)</span> = <span class="mxinfo " id="T3:U298"><span class="mxinfo " id="T3:U299"><span class="var type1" id="S8T8U366">y</span>(<span class="var type1" id="S12T3U367">z</span>)</span> - <span class="mxinfo " id="T3:U302"><span class="mxinfo " id="T3:U303"><span class="mxinfo " id="T3:U304"><span class="mxinfo " id="T3:U305"><span class="mxinfo " id="T3:U306">sign(<span class="mxinfo " id="T3:U307"><span class="var type1" id="S4T2U375">r</span>(<span class="mxinfo " id="T3:U309"><span class="var type1" id="S12T3U377">z</span>+<span class="mxinfo " id="T3:U311">1</span></span>)</span>)</span>* <span class="mxinfo " id="T3:U312">1</span></span>/<span class="var type1" id="S15T3U380">betr</span></span> * <span class="var type1" id="S6T3U381">dist</span></span> * <span class="var type1" id="S14T3U382">vy</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="30,34" id="srcline34">34</a></span><span class="line">        <span class="keyword">end</span>  </span></span>
<span class="srcline"><span class="lineno"><a href="30,35" id="srcline35">35</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="30,36" id="srcline36">36</a></span><span class="line">              </span></span>
<span class="srcline"><span class="lineno"><a href="30,37" id="srcline37">37</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
</pre>
